---
title: 移动端切图进化之路
categories: 移动端
tags: [移动端]
---
### 背景
---
由于公司业务需要，年前做了几个移动端的活动页面。动画超级多的那种，其中有个页面是太阳慢慢出来，然后发光，还有小鸟飞过来，人慢慢慢的走来等等。由于有动画位置的变动，因此页面的很多小图片都是采取的绝对定位。在没有人带领和没有移动端页面制作的经验的情况下，全程靠自己摸索。最先开始制作页面全靠`media query`根据不同屏幕进行调试，最主要的是iphone不同机型的屏幕。活动页面的载体是微信端，制作页面前没有把微信上方的状态栏考虑到，当把在chrome上模拟调试好的页面放在真机上查看时，整个人是懵的。![懵逼状](/imgs/03-11a.jpg)  
### 阶段
---
后来发现根据不同屏幕调试简直是神坑，毕竟市面上不同型号的手机屏幕太多了。因此第二次采取的是百分比，具体方法为根据设计图中尺寸来计算宽高所占整个设计图的百分比来进行设置，这样相对于刚开始的媒体查询省去了不少的功夫。但是最大的问题是计算，基本上都是无法除尽，每个小icon与文字间的距离不好把控导致不能完美还原设计稿。![苦](/imgs/03-11b.jpg)  
### 进化体
---
最后决定使用的解决方案：  
1. 由于设计稿是750px，因此设置body的宽度为750/100=7.5rem；  
2. 根据屏幕可见区域宽度设置根字体的大小  
`document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px'; `  
3. 字体大小单独使用`media query`  
4. 在这种解决方案下最重要的是设置  
`<meta name="viewport" content="initial-scale=1,maximum-scale=1, minimum-scale=1">`
为了解决计算的麻烦可以使用一款名为[cssrem](https://github.com/flashlizi/cssrem)的sublime插件,如图所示![cssrem](/imgs/03-11c.gif)   
在这种方案下只要根据设计稿中的原始尺寸进行输入，通过cssrem插件的单位转换，就可以得到适应于大多数移动端屏幕的页面布局了。  
这种方案最主要的是根据屏幕可见宽度设置html的`font-size`大小，由于`1rem等于html的font-size大小`，因此在不同屏幕下rem所表现出来的大小是不同的。这种方法应该能满足目前的日常工作需要。
![obama](/imgs/03-11d.jpg)
